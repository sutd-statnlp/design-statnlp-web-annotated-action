webpackJsonp([1],{Gl5H:function(t,e){},JU73:function(t,e){},LgGm:function(t,e){},NHnr:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=a("7+uW"),i={render:function(){this.$createElement;this._self._c;return this._m(0)},staticRenderFns:[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"m-guide-header row p-2"},[a("div",{staticClass:"col p-2"},[a("h6",[a("strong",[t._v("Annotate actions")])]),t._v(" "),a("span",[t._v("\n      In this HIT you will annotate "),a("strong",[t._v("actions")]),t._v(" of this image.\n    ")]),t._v(" "),a("ul",[a("li",[t._v("Draw a rectangle around the entire region the action is happening including all its related objects.")]),t._v(" "),a("li",[t._v("Press the mouse button. hold the button while you are moving the mouse and release it to Ô¨Ånish. Name the action.")]),t._v(" "),a("li",[t._v("Repeat until you mark all actions which are clearly visible in the image.")]),t._v(" "),a("li",[t._v("Remove an annotation if you did a mistake.")]),t._v(" "),a("li",[t._v("If an image cannot be annotated, provide the reason and move to the next HIT.")])]),t._v(" "),a("span",[t._v("Please read the "),a("a",{staticClass:"text-primary",attrs:{href:"#"}},[t._v("guidelines")]),t._v(" carefully before you start annotation. Your submission will not be accepted it it doesn't follow the guidelines.")])])])}]};var s={components:{GuideHeader:a("VU/8")({name:"GuideHeader",data:function(){return{}}},i,!1,function(t){a("LgGm")},"data-v-73f1683c",null).exports},name:"App"},o={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"container",attrs:{id:"app"}},[e("GuideHeader"),this._v(" "),e("router-view")],1)},staticRenderFns:[]};var r=a("VU/8")(s,o,!1,function(t){a("JU73")},null,null).exports,c=a("/ocq"),l=a("mvHQ"),d=a.n(l),u=a("Zrlr"),m=a.n(u),h=a("wxAW"),v=a.n(h),p=new(function(){function t(){m()(this,t)}return v()(t,[{key:"downloadJson",value:function(t,e){t=d()(t,null,2),this.download(t,e,"text/json")}},{key:"download",value:function(t,e,a){if(t){e||(e="data");var n=new Blob([t],{type:a});if(window.navigator&&window.navigator.msSaveOrOpenBlob)window.navigator.msSaveOrOpenBlob(n,e);else{var i=document.createEvent("MouseEvents"),s=document.createElement("a");s.download=e,s.href=window.URL.createObjectURL(n),s.dataset.downloadurl=[a,s.download,s.href].join(":"),i.initEvent("click",!0,!1,window,0,0,0,0,0,!1,!1,!1,!1,0,null),s.dispatchEvent(i)}}else console.error("No data")}}]),t}()),g=new(function(){function t(){m()(this,t),this.images=[{id:"1",name:"img1.jpg",w:3648,h:2736,hasActions:!1,actions:[],reason:""},{id:"2",name:"img2.jpg",w:4608,h:3456,hasActions:!1,actions:[],reason:""},{id:"8",name:"img8.jpg",w:1024,h:768,hasActions:!1,actions:[],reason:""},{id:"19",name:"img19.jpg",w:2700,h:1801,hasActions:!1,actions:[],reason:""},{id:"22",name:"img22.jpg",w:1500,h:1e3,hasActions:!1,actions:[],reason:""},{id:"28",name:"img28.jpg",w:7360,h:4912,hasActions:!1,actions:[],reason:""},{id:"31",name:"img31.jpg",w:1024,h:768,hasActions:!1,actions:[],reason:""},{id:"39",name:"img39.jpg",w:2e3,h:1329,hasActions:!1,actions:[],reason:""},{id:"197",name:"img197.jpg",w:592,h:394,hasActions:!1,actions:[],reason:""},{id:"217",name:"img217.jpg",w:1024,h:819,hasActions:!1,actions:[],reason:""}]}return v()(t,[{key:"getAll",value:function(){return this.images}},{key:"getIndexById",value:function(t){for(var e=0;e<this.images.length;e++){if(this.images[e].id===t)return e}}}]),t}()),f=a("mtWM"),w=a.n(f),b={name:"HomePage",data:function(){return{resize:6,images:[],currentImageIndex:0,canvas:null,context:null,imageObj:new Image,actions:[],currentAction:{label:"",x1:0,y1:0,x2:0,y2:0},mousedown:!1,radioOption:"action",reason:"Too crowded",reasonOther:"",error:null}},created:function(){this.images=g.getAll();var t=this.$route.params.imageId;t&&(this.currentImageIndex=g.getIndexById(t))},mounted:function(){this.canvas=document.getElementById("m-canvas"),this.context=this.canvas.getContext("2d"),this.draw(0,0,0,0,!0);this.drawByCoordinateIndex([{x:0,y:0,w:0,h:0}],0),this.context.clearRect(0,0,400,300);var t=0,e=0,a=0,n=0;this.mousedown=!1,$(this.canvas).on("mousedown",function(a){if("action"===this.radioOption){var n=this.canvas.getBoundingClientRect();t=parseInt(a.clientX-n.left),e=parseInt(a.clientY-n.top),this.mousedown=!0}}.bind(this)),$(this.canvas).on("mouseup",function(t){"action"===this.radioOption&&(this.mousedown=!1,this.actions.unshift(this.currentAction),this.currentAction={label:"",x1:0,y1:0,x2:0,y2:0})}.bind(this)),$(this.canvas).on("mousemove",function(i){if("action"===this.radioOption){var s=this.canvas.getBoundingClientRect();if(a=parseInt(i.clientX-s.left),n=parseInt(i.clientY-s.top),this.mousedown){this.context.clearRect(0,0,this.canvas.width,this.canvas.height),this.context.beginPath();var o=a-t,r=n-e;this.draw(t,e,o,r),this.currentAction={label:"",x1:t*this.resize,y1:e*this.resize,x2:a*this.resize,y2:n*this.resize}}}}.bind(this))},methods:{drawByCoordinateIndex:function(t,e){var a=t[e],n=a.x,i=a.y,s=a.w,o=a.h;this.draw(n,i,s,o)},configCanvasResize:function(t){this.resize=t<=1e3?1:t<=2e3?2:t>=6e3?10:6},draw:function(t,e,a,n,i){if(i){var s=this.images[this.currentImageIndex];this.imageObj.src="./static/images/"+s.name,this.configCanvasResize(s.w),this.context.canvas.width=s.w/this.resize,this.context.canvas.height=s.h/this.resize,this.imageObj.onload=function(){this.context.drawImage(this.imageObj,0,0,this.canvas.width,this.canvas.height)}.bind(this)}this.context.drawImage(this.imageObj,0,0,this.canvas.width,this.canvas.height),this.context.rect(t,e,a,n),this.context.strokeStyle="#41F748",this.context.setLineDash([6]),this.context.lineWidth=5,this.context.stroke()},removeAction:function(t){this.actions.splice(t,1),this.context.clearRect(0,0,this.canvas.width,this.canvas.height),this.context.drawImage(this.imageObj,0,0,this.canvas.width,this.canvas.height)},submitAction:function(){"action"===this.radioOption&&this.actions.length<2?this.error="At least 2 actions !":this.currentImageIndex>=this.images.length-1||(this.validateCoordinates()?(this.saveData(),this.postData(),this.$router.push("/img/"+this.images[this.currentImageIndex+1].id)):this.error="Coordinates (0,0,0,0) is not an accepted !")},saveData:function(){"action"===this.radioOption?(this.images[this.currentImageIndex].actions=this.actions,this.images[this.currentImageIndex].hasActions=!0):(this.images[this.currentImageIndex].reason="other"===this.reason?this.reasonOther:this.reason,this.images[this.currentImageIndex].hasActions=!1)},postData:function(){var t=new URLSearchParams;t.append("data",d()(this.images)),w.a.post("https://workersandbox.mturk.com/mturk/externalSubmit",t).then(function(t){console.log(t)}).catch(function(t){console.error(t)})},saveJson:function(){this.saveData(),p.downloadJson(this.images,"images.json")},loadDefault:function(){this.error=null,this.mousedown=!1,this.radioOption="action",this.reason="Too crowded",this.reasonOther="",this.draw(0,0,0,0,!0),this.actions=[]},validateCoordinates:function(){for(var t=!0,e=0;e<this.actions.length;e++){var a=this.actions[e];if(0===a.x1&&0===a.y1&&0===a.x2&&0===a.y2){t=!1;break}}return t}},watch:{radioOption:function(t){"action"===t?$(".m-input-label").attr("required",!0):$(".m-input-label").attr("required",!1)},$route:function(t,e){this.currentImageIndex=g.getIndexById(t.params.imageId),this.loadDefault()}}},x={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"m-home"},[a("form",{on:{submit:function(e){return e.preventDefault(),t.submitAction(e)}}},[t._m(0),t._v(" "),a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-6 col-sm-12"},[a("div",{staticClass:"p-2"},[a("div",{staticClass:"form-check"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.radioOption,expression:"radioOption"}],staticClass:"form-check-input",attrs:{type:"radio",name:"radios",id:"radios1",value:"action",checked:""},domProps:{checked:t._q(t.radioOption,"action")},on:{change:function(e){t.radioOption="action"}}}),t._v(" "),a("label",{staticClass:"form-check-label",attrs:{for:"radios1"}},[t._v("\n            At least 2 Actions can be annotated in the image (start by drawing bounding box on the image)\n          ")])]),t._v(" "),a("p"),t._v(" "),a("div",{staticClass:"border p-2",class:"action"==t.radioOption?"":"disabledDiv"},[t.mousedown?a("div",{staticClass:"pt-1"},[a("span",[t._v("Action"+t._s(t.actions.length+1))]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.currentAction.label,expression:"currentAction.label"}],staticClass:"input-label",attrs:{type:"text",placeholder:"label"},domProps:{value:t.currentAction.label},on:{input:function(e){e.target.composing||t.$set(t.currentAction,"label",e.target.value)}}}),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.currentAction.x1,expression:"currentAction.x1"}],staticClass:"input-cordinate",attrs:{type:"number",placeholder:"x1",value:"20"},domProps:{value:t.currentAction.x1},on:{input:function(e){e.target.composing||t.$set(t.currentAction,"x1",e.target.value)}}}),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.currentAction.y1,expression:"currentAction.y1"}],staticClass:"input-cordinate",attrs:{type:"number",placeholder:"y1",value:"30"},domProps:{value:t.currentAction.y1},on:{input:function(e){e.target.composing||t.$set(t.currentAction,"y1",e.target.value)}}}),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.currentAction.x2,expression:"currentAction.x2"}],staticClass:"input-cordinate",attrs:{type:"number",placeholder:"x2",value:"40"},domProps:{value:t.currentAction.x2},on:{input:function(e){e.target.composing||t.$set(t.currentAction,"x2",e.target.value)}}}),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.currentAction.y2,expression:"currentAction.y2"}],staticClass:"input-cordinate",attrs:{type:"number",placeholder:"y2",value:"42"},domProps:{value:t.currentAction.y2},on:{input:function(e){e.target.composing||t.$set(t.currentAction,"y2",e.target.value)}}}),t._v(" "),a("button",{staticClass:"close btn-rm-action",attrs:{type:"button","aria-label":"Close"},on:{click:function(e){t.removeAction(t.index)}}},[a("span",{staticClass:"text-danger",attrs:{"aria-hidden":"true"}},[t._v("√ó")])])]):t._e(),t._v(" "),t._l(t.actions,function(e,n){return a("div",{key:n,staticClass:"pt-1"},[a("span",[t._v("Action"+t._s(t.actions.length-n))]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:e.label,expression:"item.label"}],staticClass:"input-label m-input-label",attrs:{type:"text",placeholder:"label",required:""},domProps:{value:e.label},on:{input:function(a){a.target.composing||t.$set(e,"label",a.target.value)}}}),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:e.x1,expression:"item.x1"}],staticClass:"input-cordinate",attrs:{type:"number",placeholder:"x1",min:"0"},domProps:{value:e.x1},on:{input:function(a){a.target.composing||t.$set(e,"x1",a.target.value)}}}),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:e.y1,expression:"item.y1"}],staticClass:"input-cordinate",attrs:{type:"number",placeholder:"y1",min:"0"},domProps:{value:e.y1},on:{input:function(a){a.target.composing||t.$set(e,"y1",a.target.value)}}}),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:e.x2,expression:"item.x2"}],staticClass:"input-cordinate",attrs:{type:"number",placeholder:"x2",min:"0"},domProps:{value:e.x2},on:{input:function(a){a.target.composing||t.$set(e,"x2",a.target.value)}}}),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:e.y2,expression:"item.y2"}],staticClass:"input-cordinate",attrs:{type:"number",placeholder:"y2",min:"0"},domProps:{value:e.y2},on:{input:function(a){a.target.composing||t.$set(e,"y2",a.target.value)}}}),t._v(" "),a("button",{staticClass:"close btn-rm-action",attrs:{type:"button","aria-label":"Close"},on:{click:function(e){t.removeAction(n)}}},[a("span",{staticClass:"text-danger",attrs:{"aria-hidden":"true"}},[t._v("√ó")])])])})],2)])]),t._v(" "),a("div",{staticClass:"col-md-6 col-sm-12"},[a("div",{staticClass:"p-2"},[a("div",{staticClass:"form-check"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.radioOption,expression:"radioOption"}],staticClass:"form-check-input",attrs:{type:"radio",name:"radios",id:"radios2",value:"reason"},domProps:{checked:t._q(t.radioOption,"reason")},on:{change:function(e){t.radioOption="reason"}}}),t._v(" "),a("label",{staticClass:"form-check-label",attrs:{for:"radios2"}},[t._v("\n            Actions cannot be annotated in the image\n          ")])]),t._v(" "),a("p"),t._v(" "),a("div",{staticClass:"border p-2",class:"reason"==t.radioOption?"":"disabledDiv"},[a("div",{staticClass:"row"},[t._m(1),t._v(" "),a("div",{staticClass:"col-10"},[a("div",{staticClass:"form-check"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.reason,expression:"reason"}],staticClass:"form-check-input",attrs:{type:"radio",name:"radiosReason",id:"radiosReason1",value:"Too crowded",checked:""},domProps:{checked:t._q(t.reason,"Too crowded")},on:{change:function(e){t.reason="Too crowded"}}}),t._v(" "),a("label",{staticClass:"form-check-label",attrs:{for:"radiosReason1"}},[t._v("\n                  Too crowded\n                ")])]),t._v(" "),a("div",{staticClass:"form-check"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.reason,expression:"reason"}],staticClass:"form-check-input",attrs:{type:"radio",name:"radiosReason",id:"radiosReason2",value:"No action/mutilple actions happening"},domProps:{checked:t._q(t.reason,"No action/mutilple actions happening")},on:{change:function(e){t.reason="No action/mutilple actions happening"}}}),t._v(" "),a("label",{staticClass:"form-check-label",attrs:{for:"radiosReason2"}},[t._v("\n                  Not sufficient enough actions happening for annotation\n                ")])]),t._v(" "),a("div",{staticClass:"form-check"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-2"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.reason,expression:"reason"}],staticClass:"form-check-input",attrs:{type:"radio",name:"radiosReason",value:"other",id:"radiosReason3"},domProps:{checked:t._q(t.reason,"other")},on:{change:function(e){t.reason="other"}}}),t._v(" "),a("label",{staticClass:"form-check-label",attrs:{for:"radiosReason3"}},[t._v("\n                      Other\n                    ")])]),t._v(" "),a("div",{staticClass:"col-6"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.reasonOther,expression:"reasonOther"}],staticClass:"form-control",attrs:{id:"inputOther",type:"text",disabled:"other"!=t.reason,required:"other"==t.reason},domProps:{value:t.reasonOther},on:{input:function(e){e.target.composing||(t.reasonOther=e.target.value)}}})])])])])])])]),t._v(" "),a("div",{staticClass:"p-2"},[a("button",{staticClass:"btn btn-secondary float-right",attrs:{type:"submit"}},[t._v("Submit")]),t._v(" "),a("button",{staticClass:"btn btn-secondary",attrs:{type:"button"},on:{click:t.saveJson}},[t._v("Save JSON")])]),t._v(" "),a("div",{staticClass:"p-2"},[t.error?a("div",{staticClass:"alert alert-warning",attrs:{role:"alert"}},[t._v("\n          "+t._s(t.error)+"\n        ")]):t._e()])])])])])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"row justify-content-center"},[e("canvas",{attrs:{id:"m-canvas",width:"540",height:"320"}})])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"col-2"},[e("span",[this._v("Reason")])])}]};var _=a("VU/8")(b,x,!1,function(t){a("Gl5H")},"data-v-29bb84ea",null).exports;n.a.use(c.a);var y=new c.a({routes:[{path:"/",name:"HomePage",component:_},{path:"/img/:imageId",name:"HomePageWithImageID",component:_}]});n.a.config.productionTip=!1,new n.a({el:"#app",router:y,components:{App:r},template:"<App/>"})}},["NHnr"]);
//# sourceMappingURL=app.90a154882688231cd8bb.js.map